using System;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Linq;
using System.Runtime.CompilerServices;
using System.Threading.Tasks;
using XF.IncrementalListView;

namespace IncrementalListView.Sample
{
    public class ViewModel : BindableBase, IIncrementalSource
    {
        private static readonly string[] data = new[]
        {
            "QMipXLFqpo",
            "FMbTjqHMRP",
            "piOuE576x2",
            "7nYh0TavNU",
            "cdDlNILxcV",
            "uKfJzQdvdr",
            "XkC2q5Nb9C",
            "BCpeqJVCxC",
            "kNnNOahVFv",
            "kW2teVXcRH",
            "IvplTC9ijv",
            "NF0MsQx9v4",
            "QaO3mFfFS4",
            "BgSCE5IQqb",
            "tIKwGwcP8v",
            "VvAtPA3JB1",
            "Qg58BRMVau",
            "XwsojaE3ZM",
            "a1nY7eujoQ",
            "8ATITuzbp2",
            "NuiU1ZpB1e",
            "hM2TKJVyDy",
            "kgV4WBK957",
            "wk07XGQiUR",
            "WAxwsPlQd1",
            "5QDHjLTYFz",
            "7cxPw9Tzvv",
            "KGntEo7q61",
            "eZd8jTavHQ",
            "NJKBvSCxCb",
            "o6cadLuVJV",
            "b26Cgzzj6x",
            "8Q5CrXduvk",
            "nqTOiyjJne",
            "WcFcqM2FWP",
            "SgUs9ZvyPs",
            "tRcCQHcfJj",
            "whx8ggBZ2Z",
            "cyPkiIOIYI",
            "sznnXJECEf",
            "VIRwZxMUjH",
            "6KnjypII7D",
            "MTtMq68fzJ",
            "GKLGuADXB2",
            "gnLkgPiPJz",
            "k16Pv8o5aI",
            "VWDimDOCH9",
            "lBiDms4J3L",
            "tHEd4J3IGL",
            "gzxfK5SnWV",
            "v3vWbj1PNY",
            "4jqcMuWMhR",
            "ldqytF0C0k",
            "CY40nvVmyq",
            "JwSkGkW87W",
            "EvdLxSn3Ci",
            "uKAZkIr6ii",
            "kJ7vD9f83r",
            "LBlx6wCFVo",
            "u0rGDGhJh1",
            "Jkyr8Yo03c",
            "YdOoYZZ7ME",
            "X6mkY53555",
            "8ELEBxoTAO",
            "C1JTmn9Uvw",
            "lLEKED9W7q",
            "EbGPRkV6oi",
            "IOibfHz3Wo",
            "zeBHNpWb9P",
            "2p9zo9R6hX",
            "eWZL2fMDQ9",
            "LYT3vlV2GW",
            "sWAjTb1QE4",
            "fWQ6HECwo2",
            "NClUdNwdkn",
            "E18cjRKDNV",
            "xSqT4xcCUF",
            "CarOC3w6d6",
            "2hKnF8FznY",
            "Y4efJRJuVt",
            "DBYTb6Slex",
            "GPzJAE5pEu",
            "nZ82lwtiMq",
            "FI15r9qIKN",
            "aWmb95ozet",
            "76EhHA39Nc",
            "cf9eL7bqLa",
            "JbAOpKRT9X",
            "C8Vu7rvTFU",
            "Zx6UAmNJnR",
            "ZKdeTiVqZq",
            "9F8wm8BZJC",
            "LVG3QweJDa",
            "JUykeipVFt",
            "FGlc0M95yF",
            "KZhCn03WS4",
            "yOl3FlHD6y",
            "72U09d7ZK9",
            "k9Y12f46qN",
            "YMrOXbqWce",
            "dYzWckyKl3",
            "1Y3wMYnMnZ",
            "EIk8t2u3aR",
            "aCzlsx7OEv",
            "HQWHlmzgUL",
            "76N9qBJTwS",
            "PvQ9KkZhKz",
            "aSgXdNgqeg",
            "RbieavIvKo",
            "YPEXFnKQGH",
            "RPcelfhsdI",
            "BNvuK3HJOF",
            "Rpm773706a",
            "r0LcI85ror",
            "fFSZs1BSJz",
            "96mGmYo88y",
            "geRzyNiOx4",
            "DLOAbkBsIZ",
            "v8xtvO3Wkj",
            "jyAWHgYSvn",
            "l2Q3QjzOem",
            "WrB01Qm8Mj",
            "F9ZuL4wElO",
            "25twowZQTb",
            "5tuFN1sRaM",
            "1KqbrIxSu1",
            "t1lp3D8mC9",
            "zvWKJUIbJs",
            "5yF5VG558U",
            "7LQCaPhrAx",
            "RldBFPFC5l",
            "ZdUavkyWOF",
            "z7NOW4mJby",
            "GLvxmHm0wY",
            "p024DcJYnO",
            "qogHXk7TFo",
            "O6SQy0g9CG",
            "wC37idYJXh",
            "o2ppHgPGAG",
            "ooy8jHqLuc",
            "qjhnXzvIzz",
            "WqPtIMyQDU",
            "eSOlohB6ss",
            "cpsb6z0uNh",
            "Z70IL2gPyU",
            "mMwZskwT61",
            "q4GRGYU5lU",
            "DY2mWm0XRb",
            "BbYlNkteN1",
            "j1aJS2NXQo",
            "0uBZCA6fYi",
            "liIWUsIkJB",
            "ZuHsw0Kunq",
            "aWaSYiPFZU",
            "UJZ9daysfo",
            "YQur9RO9PP",
            "iLCVCosXbS",
            "etlwwfHrb3",
            "ke6J0NVBLK",
            "4DIhNEAisx",
            "LzZsKMQCAX",
            "1r3bR6tP7z",
            "2ASIYCpdyM",
            "baZWsg4W2O",
            "5i1uQdnvoy",
            "QqHcHFVtPa",
            "JHJEg022L8",
            "LS6JWBSLjI",
            "Yf5OcoVNna",
            "srtVmMvQ2V",
            "S1eKsYMmjN",
            "km6TW9ZpDT",
            "mkbBa3BEOd",
            "8KAP3jRwqW",
            "afI8yOwKib",
            "iIq7wSAchT",
            "p5KrQjRqIF",
            "J3coc6UZbb",
            "Ent6INGPvA",
            "W7Zby8EA1s",
            "aIamgDNzkT",
            "pp1EKwz5nk",
            "3wNAIcyDSM",
            "zRHvpvAM1z",
            "dFO8P3YvHU",
            "HShtxVNdul",
            "CMu8s5hZby",
            "lS3II2zZrn",
            "Y00K08J0LS",
            "RKHZbSFZZ4",
            "BR2GlFyiUU",
            "IMOiX90rcg",
            "nKZAXiXYU4",
            "rJvN7u2JW5",
            "PyuGoGvowj",
            "tsiHJZPTsr",
            "dpOWXpddFu",
            "vpbkVT9gRu",
            "n494ImADIc",
            "zgOzqdNB7r",
            "AnZpmx9q8S",
            "ZESNImElCu",
            "XF58egwJNG",
            "cERaMzIF35",
            "R0xNRDABJX",
            "i25v4WSjy1",
            "66NgPY26nl",
            "G4OmlzFF7F",
            "20a5le294Q",
            "5QzmrcqQKx",
            "Y011KKxsZe",
            "dwgD7i34fr",
            "xphkr0wslI",
            "zH8DOF130y",
            "rIO7frVXqm",
            "xYM112bAap",
            "1oWW1DfMda",
            "FYDyULQGfo",
            "fRGl8dFKIm",
            "Pk5CiaArsw",
            "txPCySLvFa",
            "Y31T3TGMM5",
            "YfkW2F41sR",
            "WrWBQnDihx",
            "OYZT2NjJRU",
            "pwhSB8ncrv",
            "VvUIxIcHus",
            "K48VsU8IPs",
            "SIgQgtm3aW",
            "uhNCSnpzAG",
            "Z3IpgcQYbF",
            "qyHPNf1zxQ",
            "icebDuIpAC",
            "9wglfODKGs",
            "Wjg5MZicZr",
            "HuCtr3mGU7",
            "NaMhnC6Y8Z",
            "rEUXBZDGuy",
            "eOcM4u19sv",
            "MdMBI4LkOm",
            "m0twuXsZyp",
            "piS26IJKRp",
            "5sBbw5881t",
            "nnVaRNQUkV",
            "csr7ZJZ1hj",
            "KcPml7NmRy",
            "2QKORPTP6J",
            "BZJAz8Q7os",
            "CFUMCduOW6",
            "mpawXsKuVq",
            "GrEJSURlzv",
            "C1eq2hYDzo",
            "JukxAwGexA",
            "PBQatfK1hu",
            "0x80xvo4g1",
            "Orm9O1sAOT",
            "FqcTStm5SU",
            "zsty5B85OX",
            "5FqCszgpmh",
            "rTcz5Kq6Yr",
            "VpUfD3HSno",
            "ejho4tRDqd",
            "gNLREbCe8Q",
            "b5g9f8UymA",
            "VGXsy06FDx",
            "ZIoFBtmrXs",
            "5WPXcA44Sw",
            "4AVjT5FmwR",
            "ITHj3TSPPw",
            "8Ry3ccDSnv",
            "zirsbdkDyG",
            "EHSbWbpXHF",
            "EHZlVG6q6V",
            "0Y8yuDHN4Y",
            "gBm3dazLHu",
            "AQpzWddGgE",
            "EiSpLxZS9k",
            "dNtT46BPfo",
            "W7ftpuirwL",
            "Ddz3EFZE2C",
            "tfy2Ds25u4",
            "4spUOPIO0x",
            "zQV3LQKb5R",
            "Cbb1NIbf2W",
            "UgwNgNjSRU",
            "GHzY6icTKw",
            "qOc3mDh2Gu",
            "tU01cJItFH",
            "FjiZUunjug",
            "TQgpaOKzy0",
            "2JaLaLjSkl",
            "9INbw5WXhP",
            "Bx5tWUa7MJ",
            "7GcIf0LWX9",
            "Ri2RBM5s0q",
            "oWfvr0pFYY",
            "KFibxgfdN4",
            "ZaMlb5Shuv",
            "zB8pLXrfYY",
            "9Z72BYHYNP",
            "J4CWW90XN6",
            "v8hZy4iWff",
            "xZ2P9LvCXK",
            "Tko1q2bIyr",
            "FgRpkzEfDC",
            "UHqFXoP19a",
            "dLdXptD13j",
            "SdtLF735Je",
            "D5dUw0uBrm",
            "MkBwNNSlg4",
            "VGvuyMlecb",
            "wPgi6t4piD",
            "p5mFCCD0rE",
            "rYomkpYM0y",
            "hAZPk0a7ta",
            "BsFWt9SMKE",
            "cVzZgB3JjP",
            "WfhqBv4EGt",
            "olImo0NxMH",
            "v9yMBIM7As",
            "ZnnTABNnCf",
            "VASm9YUI2E",
            "777bwsNAKj",
            "bqrIIdKDwY",
            "nXjQhai8MK",
            "3VC4NnGKPR",
            "N4gJ5OGgwG",
            "IxrCfP1RKn",
            "SNHuSm62T4",
            "Al8Tq6PYUj",
            "LlueYDs6z8",
            "XyCqTT7dp0",
            "QFLoU5zSBn",
            "cAovRu2eks",
            "ftcUZag9Sm",
            "zpWoM1G4rQ",
            "UNHnLbqx5O",
            "9QOH2WVaUR",
            "yh1PBODdDP",
            "rLIzSXF5KC",
            "PAotawXHe8",
            "jIHCXtzNfQ",
            "iOumajIRbe",
            "vOE5kXTTvi",
            "m7rcS5MZ0X",
            "YDq5GnBadn",
            "j4GjMkWrfT",
            "ffonrUwRN0",
            "BV3218t3cm",
            "HBdMzwjhnf",
            "y2vfU95X3C",
            "0TMQwaMIkK",
            "xACJYLshDa",
            "KQ0dynsRKE",
            "1FaicIkFFi",
            "bMVZG7KQYd",
            "ngd4cTiOsT",
            "HkOEvCqrf4",
            "0H7xGVgKaZ",
            "OyHHnp8myn",
            "hRdLlOjGMk",
            "frOXNw1z0I",
            "wqLY4wNHqX",
            "Md6tMqPQOW",
            "3IwMlUQNZt",
            "MYdi6cu9ah",
            "Trlff4hBAl",
            "GkGd8p3SRD",
            "IF9ou6xmWW",
            "MdLJGH77Dg",
            "HqxexLVYgf",
            "d9XvQBHipb",
            "k4b0WALamw",
            "Yoy2t46TEp",
            "GeOFU0PLGW",
            "KbQABZ4RdU",
            "JMk7ue5aDS",
            "Oy1XAD8ER2",
            "EPNDtN4ihF",
            "rhN5iHTcHz",
            "xACA37tdfU",
            "ahndLCX8vf",
            "lfEfeXJ8rW",
            "jTc8CyQNGD",
            "C4QdjM5g9z",
            "RhMbkKOR4p",
            "3D0gSVrLyy",
            "YWjQLPQycw",
            "BV7RhLEojA",
            "KuqUfbb9sb",
            "leMjtzS26Y",
            "PhsJYKFHeA",
            "9xOVOGO0oU",
            "0uJymANZkv",
            "7AtfS9WKd6",
            "zAJVpQPhkE",
            "JUZqkS5NIO",
            "DeaavmyOUz",
            "GNCLKOe9eq",
            "oDMUIR6LQ2",
            "bBICeQ7zcP",
            "NcIphkkLdv",
            "HbDMmxY2nJ",
            "u7k2fGBOGz",
            "pDteMwo5PT",
            "AXa7q7kKBJ",
            "sVooslZMBb",
            "cm9NjbHHsO",
            "fewkwjD6zZ",
            "F1HJtqOoNb",
            "rDxjrsKP5T",
            "weEnSv3EfC",
            "SYogQvqcpK",
            "hoA5AopnOd",
            "u6zosTp2Et",
            "1tx45qxdCr",
            "Mo6sL9Fw7U",
            "J7soacJq2U",
            "GAmi4tuKL6",
            "nBrqVpgPWq",
            "0BIOyKVUDp",
            "8BNoW9ob9i",
            "kk2tFkrlOY",
            "xp7sC1yL14",
            "4A3yfcRKif",
            "Mf2bh0KXRt",
            "uZ4UO0kEmX",
            "Ano6vCYV8N",
            "S3d3jgIZEl",
            "omnEj5ox5C",
            "OUkSiM0fFO",
            "mSCFUQJ77e",
            "TL7IRsOgQT",
            "DOzIzS0vY2",
            "vj4stjJCqx",
            "b5Y7jIafB8",
            "R4TUdVxZ7A",
            "HmzYAr2SCC",
            "OK3HEeuLOP",
            "GY0LKOOSB8",
            "L0O8WYG16O",
            "iv3MS2GzMS",
            "sffE4Rc7G9",
            "nIMWTA2Vb1",
            "kUfTboi7tO",
            "d060Zvsupg",
            "hcIJsJoaxB",
            "1wZdQAQosS",
            "h9D6CEftku",
            "IZdx7JxCWo",
            "ECqFFBPYmy",
            "Z5dTnjpl0b",
            "6IK5mEqi9B",
            "NWI8syOyOd",
            "3j3467Aw3J",
            "YYbHnDSy0k",
            "ccmq928g2e",
            "fZu7QqKwUz",
            "dujQVTe2fe",
            "Z8biRZXg91",
            "VX3cozDs1D",
            "N2oiOYy0n2",
            "AKNG1SRiZB",
            "KFxCElILx0",
            "AGJRw8Ddi0",
            "6jREP5qa9u",
            "RESENdaqBS",
            "IaPJZA585K",
            "XRyJS8aDIM",
            "S7uz2BKEhw",
            "t5TXMbEI3H",
            "48bSjXNT3W",
            "jIfe0wnnyz",
            "2ov8LUStF9",
            "lbXVTwDrIu",
            "72KBSwhAHG",
            "Ylom8Yh7ft",
            "ex4tqlKK9T",
            "sEfZ2kPoEo",
            "gUH3ruuimP",
            "h1QZGB7csI",
            "c7yXO8rQg7",
            "DaeEdSahij",
            "WdHiv8x595",
            "8zdfDCGeUT",
            "sCO10l4LfT",
            "KWmPAOzUqp",
            "8WvLdml40q",
            "npMMei8e55",
            "idXefv2VYj",
            "GUS4xNJSdL",
            "fBA4TziGT1",
            "YRYURC66Mz",
            "oyrG8M9rAd",
            "x6xiLZG9o6",
            "omEhtiwptm",
            "psKzytEbZw",
            "UFqjTf1fLu",
            "F77SDOPazl",
            "WO6iDTCVJi",
        };

        private ObservableCollection<string> _Data = default(ObservableCollection<string>);
        public ObservableCollection<string> Data { get => _Data; set => Set(ref _Data, value); }

        public ViewModel()
        {
            Data = new ObservableCollection<string>();
        }

        public async Task GetPagedItemsAsync(int pageIndex, int pageSize)
        {
            await Task.Delay(TimeSpan.FromSeconds(3));

            var res = data.Skip(pageIndex).Take(pageSize).ToList();
            foreach (var item in res)
                Data.Add(item);
        }
    }

    public abstract class BindableBase : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        public void RaisePropertyChanged([CallerMemberName]string propertyName = null)
        {
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
        }

        public void Set<T>(ref T storage, T value, [CallerMemberName]string propertyName = null)
        {
            if (!Equals(storage, value))
            {
                storage = value;
                RaisePropertyChanged(propertyName);
            }
        }
    }
}
